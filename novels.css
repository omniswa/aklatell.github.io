:root{--bg-color:#ffffff;--text-color:#222222;--accent-color:#ea580c;--ui-bg:rgba(248, 249, 250, 0.95);--ui-border:#e9ecef;--font-size-base:1.125rem;--line-height:1.8;--max-width:680px}[data-theme="sepia"]{--bg-color:#f4ecd8;--text-color:#433422;--accent-color:#8b5e3c;--ui-bg:rgba(233, 224, 201, 0.95);--ui-border:#d4cba8}[data-theme="dark"]{--bg-color:#1a1a1a;--text-color:#d0d0d0;--accent-color:#fb923c;--ui-bg:rgba(45, 45, 45, 0.95);--ui-border:#404040}@font-face{font-family:"Spectral";src:url(../spectral.woff2) format('woff2');font-display:swap}@font-face{font-family:"Domine";src:url(../domine.woff2) format('woff2');font-display:swap}[data-font="spectral"]{--font-ui:"Spectral", Georgia, serif}[data-font="domine"]{--font-ui:"Domine", Georgia, serif}[data-font="arial"]{--font-ui:-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif}*{box-sizing:border-box}html{scroll-behavior:smooth}body{background-color:var(--bg-color);color:var(--text-color);font-family:var(--font-ui);line-height:var(--line-height);font-size:var(--font-size-base);margin:0;transition:background-color 0.3s ease,color 0.3s ease;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility}.chapter{margin-bottom:4rem}main{max-width:var(--max-width);margin:0 auto;padding:2rem 1.5rem 8rem 1.5rem;min-height:100vh}h1,h2,h3{text-align:center;color:var(--text-color);margin-top:2.5em;line-height:1.2}h1{font-size:2.2rem;margin-bottom:.5rem}h2{font-size:1.5rem;border-bottom:1px solid var(--ui-border);padding-bottom:.5rem}a{color:var(--accent-color);text-decoration:none}p{text-align:left;margin-bottom:1.2em;max-width:65ch;margin-left:auto;margin-right:auto}#progress-container{position:fixed;top:0;left:0;width:100%;height:4px;background:#fff0;z-index:1000;pointer-events:none}#progress-bar{height:100%;background:var(--accent-color);width:0%;transition:width 0.1s linear}.ui-controls{position:fixed;bottom:30px;right:20px;display:flex;flex-direction:column;gap:12px;z-index:900;transition:transform 0.4s cubic-bezier(.4,0,.2,1),opacity 0.4s ease}.ui-controls.hidden{transform:translateY(100px);opacity:0;pointer-events:none}.btn-fab{background:var(--ui-bg);color:var(--text-color);border:1px solid var(--ui-border);backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px);border-radius:50%;width:50px;height:50px;display:flex;align-items:center;justify-content:center;cursor:pointer;box-shadow:0 4px 12px rgb(0 0 0 / .1);transition:transform 0.2s cubic-bezier(.175,.885,.32,1.275),background-color 0.2s}.btn-fab:hover{transform:scale(1.1);background-color:var(--ui-bg)}.btn-fab:active{transform:scale(.95)}.settings-panel{position:fixed;bottom:90px;right:20px;background:var(--ui-bg);backdrop-filter:blur(10px);border:1px solid var(--ui-border);border-radius:12px;padding:1.25rem;box-shadow:0 10px 30px rgb(0 0 0 / .15);width:260px;z-index:901;visibility:hidden;opacity:0;transform:translateY(10px) scale(.95);transition:all 0.2s ease}.settings-panel.active{visibility:visible;opacity:1;transform:translateY(0) scale(1)}.setting-group{margin-bottom:1.25rem}.setting-label{display:block;font-size:.75rem;font-weight:700;letter-spacing:1px;margin-bottom:.75rem;opacity:.7}.theme-toggles,.size-toggles,.font-toggles{display:flex;gap:8px}.theme-btn,.font-btn,.size-btn{flex:1;padding:8px 4px;border:1px solid var(--ui-border);background:#fff0;color:var(--text-color);cursor:pointer;font-size:.85rem;border-radius:6px;transition:all 0.2s ease;text-align:center}.theme-btn.active,.font-btn.active,.size-btn.active{background:var(--accent-color);color:#fff;border-color:var(--accent-color)}.toast{position:fixed;top:30px;left:50%;background:var(--ui-bg);color:var(--text-color);border:1px solid var(--ui-border);backdrop-filter:blur(8px);padding:1rem;border-radius:50px;box-shadow:0 8px 30px rgb(0 0 0 / .2);display:grid;grid-template-columns:1fr auto;align-items:center;gap:1.5rem;z-index:1100;width:auto;white-space:nowrap;transform:translate(-50%,-150px);transition:transform 0.4s cubic-bezier(.175,.885,.32,1.275)}.toast.visible{transform:translate(-50%,0)}.toast-actions{width:100%;display:flex;gap:.8rem}.btn-primary,.btn-ghost{width:100%;padding:8px 16px;border-radius:20px;cursor:pointer;font-size:.9rem;border:none}.btn-primary{background:var(--accent-color);color:#fff}.btn-ghost{background:#fff0;color:var(--text-color);border:1px solid var(--ui-border)}@media screen and (max-width:480px){h1{font-size:1.75rem}.toast{width:90%;flex-direction:column;border-radius:12px;gap:1rem}.toast-actions{width:100%;justify-content:flex-end}}